<launch>
<arg name="robot" value="fake_robot"/>
<arg name="viewer" default="true"/>

<!-- MCP -->
<include file="$(find ad_core)/launch/ad_servers.launch">
  <arg name="robot" value="$(arg robot)" />
</include>

<group ns="$(arg robot)">
  <!-- truth PPL publisher -->
  <node pkg="people_detection_vision" type="dgait2ppl.exe"
    name="dgait2ppl"  output="screen" required="true"
    args="/home/user/Downloads/0datasets/DGaitDB/*.oni" />
  <!--
    args="/home/user/Downloads/0datasets/DGaitDB/1.oni" />
    args="/media/disk/Datasets/DGaitDB/1.oni" />
  -->

  <arg name="ppl_topics" default="nite_user_mask_pplp/ppl;hog_pplp/ppl;tabletop_pplp/ppl;ppm_pplp/ppl;face_detector_pplp/ppl;artoolkit_pplp/ppl;leg_pplp/ppl"/>

  <!-- PPL benchmarker -->
  <node pkg="people_detection_vision" type="pplp_benchmarker.exe"
    name="pplp_benchmarker"  output="screen"
    args="_ppl_topics:=$(arg ppl_topics)
          _errors_display_timeout:=15
          _results_filename:=$(find people_detection_vision)/pplp_benchmarker_results.txt" />

  <!-- PPL viewer -->
  <node if="$(arg viewer)" pkg="people_utils" type="ppl_viewer.exe"
    name="ppl_viewer"  output="screen"
    args="_ppl_topics:='ground_truth_ppl;$(arg ppl_topics)'
          _reprojection_mode:=xz
          _width:=480 _height:=800
          _xmin:=-3 _xmax:=3 _ymin:=-1 _ymax:=8" />

  <!-- make a bag -->
<!--
  <node pkg="rosbag" type="record" name="bagmaker"  output="screen" args="ground_truth_ppl" />
-->
</group>

<!-- the detectors and their GUIs - launch them last to ensure mcp_server alive -->
<include file="$(find people_detection_vision)/launch/all_pplp.launch">
  <arg name="robot" value="$(arg robot)" />
</include>


</launch>
