<launch>
<arg name="robot" value="datagrabber_kinect"/>
<arg name="ceilingrobot" value="datagrabber_ceiling"/>
<arg name="viewer" default="true"/>

<!-- MCP -->
<include file="$(find ad_core)/launch/ad_servers.launch">
  <arg name="robot" value="$(arg robot)" />
</include>

<!-- raw data -->
<include file="$(find people_utils)/launch/database_player.launch">
  <arg name="display" value="true" />
</include>


<group ns="$(arg robot)">
  <arg name="ppl_topics" default="nite_user_mask_pplp/ppl;hog_pplp/ppl;tabletop_pplp/ppl;ppm_pplp/ppl;face_detector_pplp/ppl;artoolkit_pplp/ppl;leg_pplp/ppl"/>

  <!-- PPL benchmarker -->
  <node pkg="people_detection_vision" type="pplp_benchmarker.exe"
    name="pplp_benchmarker"  output="screen"
    args="_ppl_topics:=$(arg ppl_topics)
          _errors_display_timeout:=15
          _results_filename:=$(find people_detection_vision)/pplp_benchmarker_results.txt" />

  <!-- PPL viewer -->
  <node if="$(arg viewer)" pkg="people_utils" type="ppl_viewer.exe"
    name="ppl_viewer"  output="screen"
    args="_ppl_topics:='ground_truth_ppl;$(arg ppl_topics)'
          _reprojection_mode:=xz
          _width:=480 _height:=800
          _xmin:=-3 _xmax:=3 _ymin:=0 _ymax:=4" />

</group>

<!-- the detectors and their GUIs - launch them last to ensure mcp_server alive -->
<!--
<include file="$(find people_detection_vision)/launch/all_pplp.launch">
  <arg name="robot" value="$(arg robot)" />
</include>
-->

<include file="$(find people_detection_vision)/launch/artoolkit2ppl.launch">
  <arg name="robot" value="$(arg ceilingrobot)_camera" />
</include>

<node pkg="camera" type="yaml2camera_info"
  name="yaml2camera_info"  output="screen"
  args="_file_name:=$(find kinect)/data/eeePc_arnaud_webcam_calibration_new.yaml
        _camera_name:=head_camera  _topic_name:=/$(arg ceilingrobot)_camera/camera_info" />
</launch>
